{"version":3,"sources":["../../src/controller/channel.js"],"names":["config","db","api","post","authenticate","req","res","newChannel","Channel","name","body","description","save","err","status","json","message","get","find","channels","findById","params","id","channel","delete","User","remove","_id"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,IAAJ,CAAS,MAAT,EAAiBC,4BAAjB,EAA+B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3C,QAAIC,aAAa,IAAIC,iBAAJ,EAAjB;AACAD,eAAWE,IAAX,GAAkBJ,IAAIK,IAAJ,CAASD,IAA3B;AACAF,eAAWI,WAAX,GAAyBN,IAAIK,IAAJ,CAASC,WAAlC;;AAEAJ,eAAWK,IAAX,CAAgB,eAAO;AACrB,UAAGC,GAAH,EAAO;AACLP,YAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASH,GAAX,EAArB;AACD;AACDP,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,4BAAX,EAArB;AACD,KALD;AAMD,GAXD;;AAaA;AACAd,MAAIe,GAAJ,CAAQ,GAAR,EAAab,4BAAb,EAA2B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvCE,sBAAQU,IAAR,CAAa,EAAb,EAAiB,UAACL,GAAD,EAAMM,QAAN,EAAmB;AAClC,UAAIN,GAAJ,EAAS;AACPP,YAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASH,GAAX,EAArB;AACD;AACDP,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBI,QAArB;AACD,KALD;AAMD,GAPD;;AASA;AACAjB,MAAIe,GAAJ,CAAQ,MAAR,EAAgBb,4BAAhB,EAA8B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1CE,sBAAQY,QAAR,CAAiBf,IAAIgB,MAAJ,CAAWC,EAA5B,EAAgC,UAACT,GAAD,EAAMU,OAAN,EAAkB;AAChD,UAAIV,GAAJ,EAAS;AACPP,YAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASH,GAAX,EAArB;AACD;AACDP,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,OAArB;AACD,KALD;AAMD,GAPD;;AASA;AACArB,MAAIsB,MAAJ,CAAW,MAAX,EAAmBpB,4BAAnB,EAAiC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7CmB,SAAKC,MAAL,CAAY;AACVC,WAAKtB,IAAIgB,MAAJ,CAAWC;AADN,KAAZ,EAEG,UAACT,GAAD,EAAMU,OAAN,EAAkB;AACnB,UAAIV,GAAJ,EAAS;AACPP,YAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAASH,GAAX,EAArB;AACD;AACDP,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,SAAS,8BAAX,EAArB;AACD,KAPD;AAQD,GATD;;AAWA,SAAOd,GAAP;AACD,C","file":"channel.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport bodyParser from 'body-parser';\nimport Channel from '../model/channel';\n\nimport { authenticate } from '../middleware/authMiddleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  //'/v1/channel/add' - Create\n  api.post('/add', authenticate, (req, res) => {\n    let newChannel = new Channel();\n    newChannel.name = req.body.name;\n    newChannel.description = req.body.description;\n\n    newChannel.save(err => {\n      if(err){\n        res.status(500).json({ message: err });\n      }\n      res.status(200).json({ message: 'Channel saved successfully' })\n    });\n  });\n\n  // '/v1/channel/' - Read\n  api.get('/', authenticate, (req, res) => {\n    Channel.find({}, (err, channels) => {\n      if (err) {\n        res.status(500).json({ message: err });\n      }\n      res.status(200).json(channels);\n    });\n  });\n\n  // '/v1/channel/:id' - Read 1\n  api.get('/:id', authenticate, (req, res) => {\n    Channel.findById(req.params.id, (err, channel) => {\n      if (err) {\n        res.status(500).json({ message: err });\n      }\n      res.status(200).json(channel);\n    });\n  });\n\n  // '/vq/channel/:id' -Delete\n  api.delete('/:id', authenticate, (req, res) => {\n    User.remove({\n      _id: req.params.id\n    }, (err, channel) => {\n      if (err) {\n        res.status(500).json({ message: err });\n      }\n      res.status(200).json({ message: 'Channel Successfully Removed'});\n    });\n  });\n\n  return api;\n}\n"]}